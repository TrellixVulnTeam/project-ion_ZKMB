<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>APM:Libraries: libraries/AP_Compass/AP_Compass.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_65717d02e6482fd400ba81c154f53df4.html">AP_Compass</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_Compass.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__Compass_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Common_8h.html">AP_Common/AP_Common.h</a>&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Declination_8h.html">AP_Declination/AP_Declination.h</a>&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Math_8h.html">AP_Math/AP_Math.h</a>&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Param_8h.html">AP_Param/AP_Param.h</a>&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="GCS__MAVLink_8h.html">GCS_MAVLink/GCS_MAVLink.h</a>&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CompassCalibrator_8h.html">CompassCalibrator.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__Compass__Backend_8h.html">AP_Compass_Backend.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// motor compensation types (for use with motor_comp_enabled)</span></div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#aea476312c9a32f19ab3a0d62f4027869">   16</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MOT_COMP_DISABLED    0x00</span></div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#abcc8f45d824956d37bc5dad4710611b4">   17</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MOT_COMP_THROTTLE    0x01</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#aa22be79a45fb28cb3160eacdf5ad4432">   18</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MOT_COMP_CURRENT     0x02</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// setup default mag orientation for some board types</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_LINUX &amp;&amp; CONFIG_HAL_BOARD_SUBTYPE == HAL_BOARD_SUBTYPE_LINUX_RASPILOT</span></div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#aa61c5cc48785eef1f5b2143fa77a50e7">   22</a></span>&#160;<span class="preprocessor"># define MAG_BOARD_ORIENTATION ROTATION_ROLL_180</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#elif CONFIG_HAL_BOARD == HAL_BOARD_LINUX &amp;&amp; CONFIG_HAL_BOARD_SUBTYPE == HAL_BOARD_SUBTYPE_LINUX_BEBOP</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor"># define MAG_BOARD_ORIENTATION ROTATION_YAW_90</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#elif CONFIG_HAL_BOARD == HAL_BOARD_LINUX &amp;&amp; (CONFIG_HAL_BOARD_SUBTYPE == HAL_BOARD_SUBTYPE_LINUX_ERLEBRAIN2 || \</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">      CONFIG_HAL_BOARD_SUBTYPE == HAL_BOARD_SUBTYPE_LINUX_PXFMINI)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor"># define MAG_BOARD_ORIENTATION ROTATION_YAW_270</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"># define MAG_BOARD_ORIENTATION ROTATION_NONE</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// define default compass calibration fitness and consistency checks</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#af4b14d20a1ad32e0d381181e1d92a7ca">   33</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_CALIBRATION_FITNESS_DEFAULT 16.0f</span></div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#a55cc3f7c59fe257f8926d02f8462aa20">   34</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MAX_XYZ_ANG_DIFF radians(90.0f)</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#a8bc3b9dad383e949bb7a78683f027132">   35</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MAX_XY_ANG_DIFF radians(60.0f)</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#a062f390a5503097ca313e53f277d1f64">   36</a></span>&#160;<span class="preprocessor">#define AP_COMPASS_MAX_XY_LENGTH_DIFF 200.0f</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">   42</a></span>&#160;<span class="preprocessor">#define COMPASS_MAX_INSTANCES 3</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="AP__Compass_8h.html#a5ae256887a80a65f39d06f1cb2cbfacb">   43</a></span>&#160;<span class="preprocessor">#define COMPASS_MAX_BACKEND   3</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classCompass.html">   45</a></span>&#160;<span class="keyword">class </span><a class="code" href="classCompass.html">Compass</a></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classCompass.html#a87e4a2c4ccbb3b8c126a75a1c8539e44">   47</a></span>&#160;<span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classAP__Compass__Backend.html">AP_Compass_Backend</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classCompass.html#a68bd2a073cc0d461b2b46529aae04765">Compass</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a190aefc281aba88c7b16e4fc58035c5e">init</a>();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a2593e947a6c8a4937dccd2d367158b74">read</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#aa3372aa51bd41b1d3ee3a9234a4396a0">accumulate</a>();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classCompass.html#aeef734d2cd69c8c0c3efa182ec7f80bb">   74</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classCompass.html#aeef734d2cd69c8c0c3efa182ec7f80bb">calculate_heading</a>(<span class="keyword">const</span> <a class="code" href="classMatrix3.html">Matrix3f</a> &amp;dcm_matrix)<span class="keyword"> const </span>{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aeef734d2cd69c8c0c3efa182ec7f80bb">calculate_heading</a>(dcm_matrix, <a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>());</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classCompass.html#aeef734d2cd69c8c0c3efa182ec7f80bb">calculate_heading</a>(<span class="keyword">const</span> <a class="code" href="classMatrix3.html">Matrix3f</a> &amp;dcm_matrix, uint8_t <a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a18ec405430e055e4a01912a8ca73cbc3">set_offsets</a>(uint8_t i, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;offsets);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#afeac6bcfad2650762cccda72dbce3e69">set_and_save_offsets</a>(uint8_t i, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;offsets);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#ae581710aa79ddf7abce3b3893bb08ea5">set_and_save_diagonals</a>(uint8_t i, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;diagonals);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a6728a7129a64d973461b9d5eb95dc81a">set_and_save_offdiagonals</a>(uint8_t i, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;diagonals);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#abfc394b43272d5a6e97001232e201b7f">save_offsets</a>(uint8_t i);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#abfc394b43272d5a6e97001232e201b7f">save_offsets</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// return the number of compass instances</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classCompass.html#a7bc9b45433e47cbd2632578388882135">  106</a></span>&#160;    uint8_t <a class="code" href="classCompass.html#a7bc9b45433e47cbd2632578388882135">get_count</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#afd52e3b95b4813b56a79742c0d98e6e4">_compass_count</a>; }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classCompass.html#aa1f44c7920bbd147fa2e58bfedd3c4bb">  109</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#aa1f44c7920bbd147fa2e58bfedd3c4bb">get_field</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#ab28e5dcaf24ec01fef67b8b5c5a84a9e">field</a>; }</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classCompass.html#a22ce936207eeda5d3fa55237271cef3e">  110</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#a22ce936207eeda5d3fa55237271cef3e">get_field</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a22ce936207eeda5d3fa55237271cef3e">get_field</a>(<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()); }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// compass calibrator interface</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#ab8b1d18b185660a957d2faf417e9b1dd">compass_cal_update</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a785cd621a6ecd49077881299ff1edba7">start_calibration_all</a>(<span class="keywordtype">bool</span> retry=<span class="keyword">false</span>, <span class="keywordtype">bool</span> autosave=<span class="keyword">false</span>, <span class="keywordtype">float</span> delay_sec=0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, <span class="keywordtype">bool</span> autoreboot = <span class="keyword">false</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a791e39cdbf2f1aad7ac1c65240160abf">cancel_calibration_all</a>();</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classCompass.html#a71d8ad1cb96263dfe4c0f712f14fac97">  119</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a71d8ad1cb96263dfe4c0f712f14fac97">compass_cal_requires_reboot</a>() { <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a7bc505874f47fb595ad6097bdf0ff3af">_cal_complete_requires_reboot</a>; }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a79776eee973736f7e2b218d698225dc1">is_calibrating</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">      handle an incoming MAG_CAL command</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    uint8_t <a class="code" href="classCompass.html#a5b92dfeb8382c411fc5cdfe2c35569b0">handle_mag_cal_command</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#aa81dfaba861a7072aac805e6cbae25d4">send_mag_cal_progress</a>(mavlink_channel_t chan);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a17d18b7b6d4fd415595d63d4741d4e83">send_mag_cal_report</a>(mavlink_channel_t chan);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// check if the compasses are pointing in the same direction</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a59f46d32a935d4faecc4a28d262c4388">consistent</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classCompass.html#ae998984ada93f9cee4ea1e5671df9171">  134</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ae998984ada93f9cee4ea1e5671df9171">healthy</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#ad12e4054ec35030309b98a799e9f0df4">healthy</a>; }</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classCompass.html#a3be4f1bd3056c7c0d97226f58e9f32f0">  135</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a3be4f1bd3056c7c0d97226f58e9f32f0">healthy</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a3be4f1bd3056c7c0d97226f58e9f32f0">healthy</a>(<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()); }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    uint8_t <a class="code" href="classCompass.html#a5230a4f55710e532da8f9edd0f2fb77b">get_healthy_mask</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="classCompass.html#a6ef45f63ac177793bf38270cef8228cb">  142</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#a6ef45f63ac177793bf38270cef8228cb">get_offsets</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#a3e2ff88eb37ae470b4c1b4b3c232305e">offset</a>; }</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classCompass.html#a46431b5638dd088dd4a09026109544f2">  143</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#a46431b5638dd088dd4a09026109544f2">get_offsets</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a46431b5638dd088dd4a09026109544f2">get_offsets</a>(<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()); }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a95d49517b12183412d9d0ed481b785bf">set_initial_location</a>(int32_t latitude, int32_t longitude);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classCompass.html#a82c25fb3c34757ee529eeece644c88fc">  159</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a82c25fb3c34757ee529eeece644c88fc">set_and_save_offsets</a>(uint8_t i, <span class="keywordtype">int</span> <a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> z) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="classCompass.html#afeac6bcfad2650762cccda72dbce3e69">set_and_save_offsets</a>(i, <a class="code" href="vector3_8h.html#af345ad77ba5e240c7ab72b4b2077e754">Vector3f</a>(x, y, z));</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// learn offsets accessor</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classCompass.html#a532f8a5a087bed8fa8f7c23057028785">  164</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a532f8a5a087bed8fa8f7c23057028785">learn_offsets_enabled</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a9a5653285eb6768ddfe8b7529ba12c03">_learn</a>; }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#aebf060fcb30f98e8d2c158750efa3b10">learn_offsets</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ac47b570ae40bfba56a659c5ac766a464">use_for_yaw</a>(uint8_t i) <span class="keyword">const</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ac47b570ae40bfba56a659c5ac766a464">use_for_yaw</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#ac3584d30eca4e60567613c1b09785505">set_declination</a>(<span class="keywordtype">float</span> <a class="code" href="AP__Math_8h.html#a75b14352ec1c95a8276af9a0813cfdc3">radians</a>, <span class="keywordtype">bool</span> save_to_eeprom = <span class="keyword">true</span>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="classCompass.html#a5051de1d15ee203600422235ab93c88c">get_declination</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// set overall board orientation</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classCompass.html#a9b827b915597e590ea05fab467e676b0">  183</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a9b827b915597e590ea05fab467e676b0">set_board_orientation</a>(<span class="keyword">enum</span> <a class="code" href="rotations_8h.html#a4940d1dc528122726d2c8c475657e1a9">Rotation</a> orientation) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="classCompass.html#a1d376552464c5c5792326561d063ef7e">_board_orientation</a> = orientation;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#ad897fd4be9dd67a65343465614629568">motor_compensation_type</a>(<span class="keyword">const</span> uint8_t comp_type);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classCompass.html#a336097cfe417d924215ae16a8d54834c">  194</a></span>&#160;    uint8_t <a class="code" href="classCompass.html#a336097cfe417d924215ae16a8d54834c">get_motor_compensation_type</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">_motor_comp_type</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a307ba851d14fd2ac3b655227812f6b4d">set_motor_compensation</a>(uint8_t i, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;motor_comp_factor);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classCompass.html#a851187d6b05722fb549d2534fa57a1f7">  206</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a>&amp; <a class="code" href="classCompass.html#a851187d6b05722fb549d2534fa57a1f7">get_motor_compensation</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#a90887b7c30ed529dc3fecfb36729f9d7">motor_compensation</a>; }</div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classCompass.html#a7572e44dc0a3d6192a1a1a98627e2fd0">  207</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a>&amp; <a class="code" href="classCompass.html#a7572e44dc0a3d6192a1a1a98627e2fd0">get_motor_compensation</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a7572e44dc0a3d6192a1a1a98627e2fd0">get_motor_compensation</a>(<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()); }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#adeefda110ce0a02edfb3d344d632777a">save_motor_compensation</a>();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classCompass.html#a7eacebe38cd31859f7b5af7d90ff79ed">  219</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#a7eacebe38cd31859f7b5af7d90ff79ed">get_motor_offsets</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#a68760988300f793f13dbfecfcc4c2714">motor_offset</a>; }</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classCompass.html#a7dd2ed6c298000c620e1919b67a9e029">  220</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;<a class="code" href="classCompass.html#a7dd2ed6c298000c620e1919b67a9e029">get_motor_offsets</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a7dd2ed6c298000c620e1919b67a9e029">get_motor_offsets</a>(<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()); }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classCompass.html#a839923d1ee8f5b97644ff9d1fc034fed">  224</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a839923d1ee8f5b97644ff9d1fc034fed">set_throttle</a>(<span class="keywordtype">float</span> thr_pct) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">_motor_comp_type</a> == <a class="code" href="AP__Compass_8h.html#abcc8f45d824956d37bc5dad4710611b4">AP_COMPASS_MOT_COMP_THROTTLE</a>) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="classCompass.html#a6e03b3c0b3eb8e71581562f5054afad3">_thr_or_curr</a> = thr_pct;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classCompass.html#a655af5eda065627c96838de985e24b57">  232</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a655af5eda065627c96838de985e24b57">set_current</a>(<span class="keywordtype">float</span> amps) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">_motor_comp_type</a> == <a class="code" href="AP__Compass_8h.html#aa22be79a45fb28cb3160eacdf5ad4432">AP_COMPASS_MOT_COMP_CURRENT</a>) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="classCompass.html#a6e03b3c0b3eb8e71581562f5054afad3">_thr_or_curr</a> = amps;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a1479c75532bc97308b1c698b67cf9bcc">configured</a>(uint8_t i);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a1479c75532bc97308b1c698b67cf9bcc">configured</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">  249</a></span>&#160;    uint8_t <a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a394201f6f17f4cf13643b3e49c69a9cc">_primary</a>; }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// HIL methods</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">void</span>        <a class="code" href="classCompass.html#a30a8fa22b1e7ee8eec8143732d40716d">setHIL</a>(uint8_t instance, <span class="keywordtype">float</span> roll, <span class="keywordtype">float</span> pitch, <span class="keywordtype">float</span> yaw);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">void</span>        <a class="code" href="classCompass.html#a30a8fa22b1e7ee8eec8143732d40716d">setHIL</a>(uint8_t instance, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;mag, uint32_t <a class="code" href="classCompass.html#a9600516e0dbde9186d3b14b3457af013">last_update_usec</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a>&amp;   <a class="code" href="classCompass.html#a4d696bdfb4d2ab9f0646d413cb6a0ee4">getHIL</a>(uint8_t instance) <span class="keyword">const</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">void</span>        <a class="code" href="classCompass.html#a0bc30e897c2c0c412120e1b1337bd1cb">_setup_earth_field</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// enable HIL mode</span></div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classCompass.html#a2dd3a327289199d640892a0e78a2619f">  258</a></span>&#160;    <span class="keywordtype">void</span>        <a class="code" href="classCompass.html#a2dd3a327289199d640892a0e78a2619f">set_hil_mode</a>(<span class="keywordtype">void</span>) { <a class="code" href="classCompass.html#a26a6c969c9e588fb680b04e99edbe811">_hil_mode</a> = <span class="keyword">true</span>; }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// return last update time in microseconds</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classCompass.html#a9600516e0dbde9186d3b14b3457af013">  261</a></span>&#160;    uint32_t <a class="code" href="classCompass.html#a9600516e0dbde9186d3b14b3457af013">last_update_usec</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">get_primary</a>()].<a class="code" href="structCompass_1_1mag__state.html#a20f1d85ff86dee5b9bf492b51013e31b">last_update_usec</a>; }</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classCompass.html#a5835c9ad9b48b44bd830041f9ae61015">  262</a></span>&#160;    uint32_t <a class="code" href="classCompass.html#a5835c9ad9b48b44bd830041f9ae61015">last_update_usec</a>(uint8_t i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structCompass_1_1mag__state.html#a20f1d85ff86dee5b9bf492b51013e31b">last_update_usec</a>; }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classCompass.html#a93d4187acb991b33c5c25f9e16b3b0ce">  264</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classCompass.html#a93d4187acb991b33c5c25f9e16b3b0ce">var_info</a>[];</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// HIL variables</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classCompass.html#affadd7bda9a16ce1c28be3249bad36b1">  268</a></span>&#160;        <a class="code" href="classVector3.html">Vector3f</a> <a class="code" href="classCompass.html#affadd7bda9a16ce1c28be3249bad36b1">Bearth</a>;</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classCompass.html#aeb8bcac3c1fe1fc0b2c2c55259b3ea9b">  269</a></span>&#160;        <span class="keywordtype">float</span> <a class="code" href="classCompass.html#aeb8bcac3c1fe1fc0b2c2c55259b3ea9b">last_declination</a>;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classCompass.html#ab3787292557255d4b935b00fe7a94f68">  270</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a3be4f1bd3056c7c0d97226f58e9f32f0">healthy</a>[<a class="code" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a>];</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classCompass.html#a0a8d322a3774f60f4c1577dad3ab016a">  271</a></span>&#160;        <a class="code" href="classVector3.html">Vector3f</a> <a class="code" href="classCompass.html#a0a8d322a3774f60f4c1577dad3ab016a">field</a>[<a class="code" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a>];</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    } <a class="code" href="classCompass.html#af72f92b449a02ac52a761c61b43597c9">_hil</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9">  274</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9">LearnType</a> {</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9accd3c6a7c4bb094dc05ac4ebb2a5b465">  275</a></span>&#160;        <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9accd3c6a7c4bb094dc05ac4ebb2a5b465">LEARN_NONE</a>=0,</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad28e8c1607b367eb985726a38a8c8201">  276</a></span>&#160;        <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad28e8c1607b367eb985726a38a8c8201">LEARN_INTERNAL</a>=1,</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad3d9fde6fa4c8639a4d835b130be0b95">  277</a></span>&#160;        <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad3d9fde6fa4c8639a4d835b130be0b95">LEARN_EKF</a>=2</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    };</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// return the chosen learning type</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classCompass.html#a4ba6019609a7cb2b5321ed892531f78d">  281</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9">LearnType</a> <a class="code" href="classCompass.html#a4ba6019609a7cb2b5321ed892531f78d">get_learn_type</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">enum</span> <a class="code" href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9">LearnType</a>)<a class="code" href="classCompass.html#a9a5653285eb6768ddfe8b7529ba12c03">_learn</a>.get();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// return maximum allowed compass offsets</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classCompass.html#aff3220e1a557a75480e4c2dbbde72973">  286</a></span>&#160;    uint16_t <a class="code" href="classCompass.html#aff3220e1a557a75480e4c2dbbde72973">get_offsets_max</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> (uint16_t)<a class="code" href="classCompass.html#af932d7ff1fc2e49177e3f2dae6e55d64">_offset_max</a>.get();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    </div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    uint8_t <a class="code" href="classCompass.html#af1b5ea3ff42b02e04526d4be361a1ca1">register_compass</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// load backend drivers</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ab943e9f79e8df83f2f125d1b025e7d0d">_add_backend</a>(<a class="code" href="classAP__Compass__Backend.html">AP_Compass_Backend</a> *backend, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="SITL__cmdline_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="keywordtype">bool</span> external);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a1c48170d8c8966b22fb150b1634443ec">_detect_backends</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// compass cal</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a659da6997da12f2a27ffd5eb45fedf8a">_accept_calibration</a>(uint8_t i);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a063eabf244187b5d60bb4674f09bce8e">_accept_calibration_mask</a>(uint8_t mask);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#ad754f61119dbfa8704305021f58d2a01">_cancel_calibration</a>(uint8_t i);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classCompass.html#a1267fc640f7c52d889feb34d8ee1d240">_cancel_calibration_mask</a>(uint8_t mask);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    uint8_t <a class="code" href="classCompass.html#ab0afcd20922d7badce8e8b8cc04610b5">_get_cal_mask</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a702eb9d33ff1f5ada05b67f9b2219f9a">_start_calibration</a>(uint8_t i, <span class="keywordtype">bool</span> retry=<span class="keyword">false</span>, <span class="keywordtype">float</span> delay_sec=0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#afdd4d0c78f52388a68dfc07deeec11a6">_start_calibration_mask</a>(uint8_t mask, <span class="keywordtype">bool</span> retry=<span class="keyword">false</span>, <span class="keywordtype">bool</span> autosave=<span class="keyword">false</span>, <span class="keywordtype">float</span> delay_sec=0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, <span class="keywordtype">bool</span> autoreboot=<span class="keyword">false</span>);</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classCompass.html#ab34228c0d17042ff15c933fabcdb3a1b">  308</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ab34228c0d17042ff15c933fabcdb3a1b">_auto_reboot</a>() { <span class="keywordflow">return</span> <a class="code" href="classCompass.html#a506d699426718666f4ccb5641dde9ea7">_compass_cal_autoreboot</a>; }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">//keep track of which calibrators have been saved</span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classCompass.html#a100e8514e6f18120aa186cbe51b63c8a">  312</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a100e8514e6f18120aa186cbe51b63c8a">_cal_saved</a>[<a class="code" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a>];</div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classCompass.html#a1e6ab6a0b7ac005733fbe1f0a9bd44f5">  313</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a1e6ab6a0b7ac005733fbe1f0a9bd44f5">_cal_autosave</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">//autoreboot after compass calibration</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classCompass.html#a506d699426718666f4ccb5641dde9ea7">  316</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a506d699426718666f4ccb5641dde9ea7">_compass_cal_autoreboot</a>;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="classCompass.html#a7bc505874f47fb595ad6097bdf0ff3af">  317</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a7bc505874f47fb595ad6097bdf0ff3af">_cal_complete_requires_reboot</a>;</div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classCompass.html#ae84aa9bde3fceb0e917bed4f84631de6">  318</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#ae84aa9bde3fceb0e917bed4f84631de6">_cal_has_run</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// backend objects</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classCompass.html#af46d67cb8eb4bc4c51bb12be6813cfdd">  321</a></span>&#160;    <a class="code" href="classAP__Compass__Backend.html">AP_Compass_Backend</a> *<a class="code" href="classCompass.html#af46d67cb8eb4bc4c51bb12be6813cfdd">_backends</a>[<a class="code" href="AP__Compass_8h.html#a5ae256887a80a65f39d06f1cb2cbfacb">COMPASS_MAX_BACKEND</a>];</div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="classCompass.html#ac3bf8f6ab108927b2ea704b3dcba1355">  322</a></span>&#160;    uint8_t     <a class="code" href="classCompass.html#ac3bf8f6ab108927b2ea704b3dcba1355">_backend_count</a>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// number of registered compasses.</span></div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="classCompass.html#afd52e3b95b4813b56a79742c0d98e6e4">  325</a></span>&#160;    uint8_t     <a class="code" href="classCompass.html#afd52e3b95b4813b56a79742c0d98e6e4">_compass_count</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// settable parameters</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classCompass.html#a9a5653285eb6768ddfe8b7529ba12c03">  328</a></span>&#160;    AP_Int8 <a class="code" href="classCompass.html#a9a5653285eb6768ddfe8b7529ba12c03">_learn</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// board orientation from AHRS</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classCompass.html#a1d376552464c5c5792326561d063ef7e">  331</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="rotations_8h.html#a4940d1dc528122726d2c8c475657e1a9">Rotation</a> <a class="code" href="classCompass.html#a1d376552464c5c5792326561d063ef7e">_board_orientation</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// primary instance</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classCompass.html#a394201f6f17f4cf13643b3e49c69a9cc">  334</a></span>&#160;    AP_Int8     <a class="code" href="classCompass.html#a394201f6f17f4cf13643b3e49c69a9cc">_primary</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// declination in radians</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="classCompass.html#a424b78025887b128dd21833cb6e31d0b">  337</a></span>&#160;    AP_Float    <a class="code" href="classCompass.html#a424b78025887b128dd21833cb6e31d0b">_declination</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// enable automatic declination code</span></div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classCompass.html#a92a1e23d7ff2ade9024f2145e4e8d0a2">  340</a></span>&#160;    AP_Int8     <a class="code" href="classCompass.html#a92a1e23d7ff2ade9024f2145e4e8d0a2">_auto_declination</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// first-time-around flag used by offset nulling</span></div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="classCompass.html#a9eab3a10f235ee9544ceaa11bb220c2c">  343</a></span>&#160;    <span class="keywordtype">bool</span>        <a class="code" href="classCompass.html#a9eab3a10f235ee9544ceaa11bb220c2c">_null_init_done</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// used by offset correction</span></div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classCompass.html#abb757f0add93c16d079a469265e2489b">  346</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint8_t <a class="code" href="classCompass.html#abb757f0add93c16d079a469265e2489b">_mag_history_size</a> = 20;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// motor compensation type</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// 0 = disabled, 1 = enabled for throttle, 2 = enabled for current</span></div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">  350</a></span>&#160;    AP_Int8     <a class="code" href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">_motor_comp_type</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// throttle expressed as a percentage from 0 ~ 1.0 or current expressed in amps</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classCompass.html#a6e03b3c0b3eb8e71581562f5054afad3">  353</a></span>&#160;    <span class="keywordtype">float</span>       <a class="code" href="classCompass.html#a6e03b3c0b3eb8e71581562f5054afad3">_thr_or_curr</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html">  355</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structCompass_1_1mag__state.html">mag_state</a> {</div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a6e1b66a2e77ea4c79a545bf1951e85a3">  356</a></span>&#160;        AP_Int8     <a class="code" href="structCompass_1_1mag__state.html#a6e1b66a2e77ea4c79a545bf1951e85a3">external</a>;</div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#ad12e4054ec35030309b98a799e9f0df4">  357</a></span>&#160;        <span class="keywordtype">bool</span>        <a class="code" href="structCompass_1_1mag__state.html#ad12e4054ec35030309b98a799e9f0df4">healthy</a>;</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a037376c09d0116a149c11cceac015c6a">  358</a></span>&#160;        AP_Int8     <a class="code" href="structCompass_1_1mag__state.html#a037376c09d0116a149c11cceac015c6a">orientation</a>;</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a3e2ff88eb37ae470b4c1b4b3c232305e">  359</a></span>&#160;        AP_Vector3f <a class="code" href="structCompass_1_1mag__state.html#a3e2ff88eb37ae470b4c1b4b3c232305e">offset</a>;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a50dc445d1c9b8ed874a7a7d7054737d2">  360</a></span>&#160;        AP_Vector3f <a class="code" href="structCompass_1_1mag__state.html#a50dc445d1c9b8ed874a7a7d7054737d2">diagonals</a>;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a4ac6e96bb0e028b4bad4faba7ecdb8c1">  361</a></span>&#160;        AP_Vector3f <a class="code" href="structCompass_1_1mag__state.html#a4ac6e96bb0e028b4bad4faba7ecdb8c1">offdiagonals</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">// device id detected at init.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// saved to eeprom when offsets are saved allowing ram &amp;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="comment">// eeprom values to be compared as consistency check</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#afe6deabcf507751cd66c36639bb9dde0">  366</a></span>&#160;        AP_Int32    <a class="code" href="structCompass_1_1mag__state.html#afe6deabcf507751cd66c36639bb9dde0">dev_id</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a49545b0efc480dbab4a518321a708dc1">  368</a></span>&#160;        AP_Int8     <a class="code" href="structCompass_1_1mag__state.html#a49545b0efc480dbab4a518321a708dc1">use_for_yaw</a>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a05412f5a1f7b78ee7e78d53d225c8b91">  370</a></span>&#160;        uint8_t     <a class="code" href="structCompass_1_1mag__state.html#a05412f5a1f7b78ee7e78d53d225c8b91">mag_history_index</a>;</div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a96ee1f1d17891437030ed6d2409b4d82">  371</a></span>&#160;        <a class="code" href="classVector3.html">Vector3i</a>    mag_history[<a class="code" href="classCompass.html#abb757f0add93c16d079a469265e2489b">_mag_history_size</a>];</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// factors multiplied by throttle and added to compass outputs</span></div><div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a90887b7c30ed529dc3fecfb36729f9d7">  374</a></span>&#160;        AP_Vector3f <a class="code" href="structCompass_1_1mag__state.html#a90887b7c30ed529dc3fecfb36729f9d7">motor_compensation</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">// latest compensation added to compass</span></div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a68760988300f793f13dbfecfcc4c2714">  377</a></span>&#160;        <a class="code" href="classVector3.html">Vector3f</a>    <a class="code" href="structCompass_1_1mag__state.html#a68760988300f793f13dbfecfcc4c2714">motor_offset</a>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">// corrected magnetic field strength</span></div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#ab28e5dcaf24ec01fef67b8b5c5a84a9e">  380</a></span>&#160;        <a class="code" href="classVector3.html">Vector3f</a>    <a class="code" href="structCompass_1_1mag__state.html#ab28e5dcaf24ec01fef67b8b5c5a84a9e">field</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// when we last got data</span></div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a37a5242ab675b8bdf0ce4246e03c5729">  383</a></span>&#160;        uint32_t    <a class="code" href="structCompass_1_1mag__state.html#a37a5242ab675b8bdf0ce4246e03c5729">last_update_ms</a>;</div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#a20f1d85ff86dee5b9bf492b51013e31b">  384</a></span>&#160;        uint32_t    <a class="code" href="structCompass_1_1mag__state.html#a20f1d85ff86dee5b9bf492b51013e31b">last_update_usec</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// board specific orientation</span></div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="structCompass_1_1mag__state.html#aef44640f156e6903935a082b38b3a66f">  387</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="rotations_8h.html#a4940d1dc528122726d2c8c475657e1a9">Rotation</a> rotation;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    } <a class="code" href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">_state</a>[<a class="code" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a>];</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classCompass.html#af932d7ff1fc2e49177e3f2dae6e55d64">  390</a></span>&#160;    AP_Int16 <a class="code" href="classCompass.html#af932d7ff1fc2e49177e3f2dae6e55d64">_offset_max</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    </div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classCompass.html#af18c9c4651e6d74aa1315e4b67779ae7">  392</a></span>&#160;    <a class="code" href="classCompassCalibrator.html">CompassCalibrator</a> <a class="code" href="classCompass.html#af18c9c4651e6d74aa1315e4b67779ae7">_calibrator</a>[<a class="code" href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a>];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// if we want HIL only</span></div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classCompass.html#a26a6c969c9e588fb680b04e99edbe811">  395</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classCompass.html#a26a6c969c9e588fb680b04e99edbe811">_hil_mode</a>:1;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classCompass.html#aa539b29e5a1086364381c2b6fc37e37e">  397</a></span>&#160;    AP_Float <a class="code" href="classCompass.html#aa539b29e5a1086364381c2b6fc37e37e">_calibration_threshold</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;};</div><div class="ttc" id="structCompass_1_1mag__state_html_ad12e4054ec35030309b98a799e9f0df4"><div class="ttname"><a href="structCompass_1_1mag__state.html#ad12e4054ec35030309b98a799e9f0df4">Compass::mag_state::healthy</a></div><div class="ttdeci">bool healthy</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00357">AP_Compass.h:357</a></div></div>
<div class="ttc" id="classCompass_html_af1b5ea3ff42b02e04526d4be361a1ca1"><div class="ttname"><a href="classCompass.html#af1b5ea3ff42b02e04526d4be361a1ca1">Compass::register_compass</a></div><div class="ttdeci">uint8_t register_compass(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00471">AP_Compass.cpp:471</a></div></div>
<div class="ttc" id="classCompass_html_ae84aa9bde3fceb0e917bed4f84631de6"><div class="ttname"><a href="classCompass.html#ae84aa9bde3fceb0e917bed4f84631de6">Compass::_cal_has_run</a></div><div class="ttdeci">bool _cal_has_run</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00318">AP_Compass.h:318</a></div></div>
<div class="ttc" id="classCompass_html_a92a1e23d7ff2ade9024f2145e4e8d0a2"><div class="ttname"><a href="classCompass.html#a92a1e23d7ff2ade9024f2145e4e8d0a2">Compass::_auto_declination</a></div><div class="ttdeci">AP_Int8 _auto_declination</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00340">AP_Compass.h:340</a></div></div>
<div class="ttc" id="classCompass_html_a5ed931ce45b6449a63d57bb01fe5a0c9ad28e8c1607b367eb985726a38a8c8201"><div class="ttname"><a href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad28e8c1607b367eb985726a38a8c8201">Compass::LEARN_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00276">AP_Compass.h:276</a></div></div>
<div class="ttc" id="classCompass_html_a702eb9d33ff1f5ada05b67f9b2219f9a"><div class="ttname"><a href="classCompass.html#a702eb9d33ff1f5ada05b67f9b2219f9a">Compass::_start_calibration</a></div><div class="ttdeci">bool _start_calibration(uint8_t i, bool retry=false, float delay_sec=0.0f)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00045">AP_Compass_Calibration.cpp:45</a></div></div>
<div class="ttc" id="classCompass_html_a68bd2a073cc0d461b2b46529aae04765"><div class="ttname"><a href="classCompass.html#a68bd2a073cc0d461b2b46529aae04765">Compass::Compass</a></div><div class="ttdeci">Compass()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00429">AP_Compass.cpp:429</a></div></div>
<div class="ttc" id="classCompass_html_a5835c9ad9b48b44bd830041f9ae61015"><div class="ttname"><a href="classCompass.html#a5835c9ad9b48b44bd830041f9ae61015">Compass::last_update_usec</a></div><div class="ttdeci">uint32_t last_update_usec(uint8_t i) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00262">AP_Compass.h:262</a></div></div>
<div class="ttc" id="classCompass_html_ae998984ada93f9cee4ea1e5671df9171"><div class="ttname"><a href="classCompass.html#ae998984ada93f9cee4ea1e5671df9171">Compass::healthy</a></div><div class="ttdeci">bool healthy(uint8_t i) const </div><div class="ttdoc">Return the health of a compass. </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00134">AP_Compass.h:134</a></div></div>
<div class="ttc" id="vector3_8h_html_af345ad77ba5e240c7ab72b4b2077e754"><div class="ttname"><a href="vector3_8h.html#af345ad77ba5e240c7ab72b4b2077e754">Vector3f</a></div><div class="ttdeci">Vector3&lt; float &gt; Vector3f</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00235">vector3.h:235</a></div></div>
<div class="ttc" id="classCompass_html_a7bc505874f47fb595ad6097bdf0ff3af"><div class="ttname"><a href="classCompass.html#a7bc505874f47fb595ad6097bdf0ff3af">Compass::_cal_complete_requires_reboot</a></div><div class="ttdeci">bool _cal_complete_requires_reboot</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00317">AP_Compass.h:317</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a20f1d85ff86dee5b9bf492b51013e31b"><div class="ttname"><a href="structCompass_1_1mag__state.html#a20f1d85ff86dee5b9bf492b51013e31b">Compass::mag_state::last_update_usec</a></div><div class="ttdeci">uint32_t last_update_usec</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00384">AP_Compass.h:384</a></div></div>
<div class="ttc" id="classCompass_html_a9600516e0dbde9186d3b14b3457af013"><div class="ttname"><a href="classCompass.html#a9600516e0dbde9186d3b14b3457af013">Compass::last_update_usec</a></div><div class="ttdeci">uint32_t last_update_usec(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00261">AP_Compass.h:261</a></div></div>
<div class="ttc" id="classCompass_html_a9a5653285eb6768ddfe8b7529ba12c03"><div class="ttname"><a href="classCompass.html#a9a5653285eb6768ddfe8b7529ba12c03">Compass::_learn</a></div><div class="ttdeci">AP_Int8 _learn</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00328">AP_Compass.h:328</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="classCompass_html_a46431b5638dd088dd4a09026109544f2"><div class="ttname"><a href="classCompass.html#a46431b5638dd088dd4a09026109544f2">Compass::get_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_offsets(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00143">AP_Compass.h:143</a></div></div>
<div class="ttc" id="classCompass_html_a506d699426718666f4ccb5641dde9ea7"><div class="ttname"><a href="classCompass.html#a506d699426718666f4ccb5641dde9ea7">Compass::_compass_cal_autoreboot</a></div><div class="ttdeci">bool _compass_cal_autoreboot</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00316">AP_Compass.h:316</a></div></div>
<div class="ttc" id="classCompass_html_a2dd3a327289199d640892a0e78a2619f"><div class="ttname"><a href="classCompass.html#a2dd3a327289199d640892a0e78a2619f">Compass::set_hil_mode</a></div><div class="ttdeci">void set_hil_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00258">AP_Compass.h:258</a></div></div>
<div class="ttc" id="classAP__Compass__Backend_html"><div class="ttname"><a href="classAP__Compass__Backend.html">AP_Compass_Backend</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Backend_8h_source.html#l00025">AP_Compass_Backend.h:25</a></div></div>
<div class="ttc" id="classCompass_html_a6728a7129a64d973461b9d5eb95dc81a"><div class="ttname"><a href="classCompass.html#a6728a7129a64d973461b9d5eb95dc81a">Compass::set_and_save_offdiagonals</a></div><div class="ttdeci">void set_and_save_offdiagonals(uint8_t i, const Vector3f &amp;diagonals)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00774">AP_Compass.cpp:774</a></div></div>
<div class="ttc" id="classCompass_html_aebf060fcb30f98e8d2c158750efa3b10"><div class="ttname"><a href="classCompass.html#aebf060fcb30f98e8d2c158750efa3b10">Compass::learn_offsets</a></div><div class="ttdeci">void learn_offsets(void)</div><div class="ttdef"><b>Definition:</b> <a href="Compass__learn_8cpp_source.html#l00029">Compass_learn.cpp:29</a></div></div>
<div class="ttc" id="classCompass_html_a100e8514e6f18120aa186cbe51b63c8a"><div class="ttname"><a href="classCompass.html#a100e8514e6f18120aa186cbe51b63c8a">Compass::_cal_saved</a></div><div class="ttdeci">bool _cal_saved[COMPASS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00312">AP_Compass.h:312</a></div></div>
<div class="ttc" id="classCompass_html_a7572e44dc0a3d6192a1a1a98627e2fd0"><div class="ttname"><a href="classCompass.html#a7572e44dc0a3d6192a1a1a98627e2fd0">Compass::get_motor_compensation</a></div><div class="ttdeci">const Vector3f &amp; get_motor_compensation(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00207">AP_Compass.h:207</a></div></div>
<div class="ttc" id="classCompass_html_a30a8fa22b1e7ee8eec8143732d40716d"><div class="ttname"><a href="classCompass.html#a30a8fa22b1e7ee8eec8143732d40716d">Compass::setHIL</a></div><div class="ttdeci">void setHIL(uint8_t instance, float roll, float pitch, float yaw)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00935">AP_Compass.cpp:935</a></div></div>
<div class="ttc" id="classCompass_html_a0120c84cc915d5a34aafedc1ce3f5186"><div class="ttname"><a href="classCompass.html#a0120c84cc915d5a34aafedc1ce3f5186">Compass::get_primary</a></div><div class="ttdeci">uint8_t get_primary(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00249">AP_Compass.h:249</a></div></div>
<div class="ttc" id="classCompass_html_a785cd621a6ecd49077881299ff1edba7"><div class="ttname"><a href="classCompass.html#a785cd621a6ecd49077881299ff1edba7">Compass::start_calibration_all</a></div><div class="ttdeci">void start_calibration_all(bool retry=false, bool autosave=false, float delay_sec=0.0f, bool autoreboot=false)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00091">AP_Compass_Calibration.cpp:91</a></div></div>
<div class="ttc" id="classCompass_html_a1e6ab6a0b7ac005733fbe1f0a9bd44f5"><div class="ttname"><a href="classCompass.html#a1e6ab6a0b7ac005733fbe1f0a9bd44f5">Compass::_cal_autosave</a></div><div class="ttdeci">bool _cal_autosave</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00313">AP_Compass.h:313</a></div></div>
<div class="ttc" id="classCompass_html_ab943e9f79e8df83f2f125d1b025e7d0d"><div class="ttname"><a href="classCompass.html#ab943e9f79e8df83f2f125d1b025e7d0d">Compass::_add_backend</a></div><div class="ttdeci">bool _add_backend(AP_Compass_Backend *backend, const char *name, bool external)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00479">AP_Compass.cpp:479</a></div></div>
<div class="ttc" id="classCompass_html_a532f8a5a087bed8fa8f7c23057028785"><div class="ttname"><a href="classCompass.html#a532f8a5a087bed8fa8f7c23057028785">Compass::learn_offsets_enabled</a></div><div class="ttdeci">bool learn_offsets_enabled() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00164">AP_Compass.h:164</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a6e1b66a2e77ea4c79a545bf1951e85a3"><div class="ttname"><a href="structCompass_1_1mag__state.html#a6e1b66a2e77ea4c79a545bf1951e85a3">Compass::mag_state::external</a></div><div class="ttdeci">AP_Int8 external</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00356">AP_Compass.h:356</a></div></div>
<div class="ttc" id="classCompass_html_a190aefc281aba88c7b16e4fc58035c5e"><div class="ttname"><a href="classCompass.html#a190aefc281aba88c7b16e4fc58035c5e">Compass::init</a></div><div class="ttdeci">bool init()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00455">AP_Compass.cpp:455</a></div></div>
<div class="ttc" id="classCompass_html_afeac6bcfad2650762cccda72dbce3e69"><div class="ttname"><a href="classCompass.html#afeac6bcfad2650762cccda72dbce3e69">Compass::set_and_save_offsets</a></div><div class="ttdeci">void set_and_save_offsets(uint8_t i, const Vector3f &amp;offsets)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00755">AP_Compass.cpp:755</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a75b14352ec1c95a8276af9a0813cfdc3"><div class="ttname"><a href="AP__Math_8h.html#a75b14352ec1c95a8276af9a0813cfdc3">radians</a></div><div class="ttdeci">static float radians(float deg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00135">AP_Math.h:135</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a05412f5a1f7b78ee7e78d53d225c8b91"><div class="ttname"><a href="structCompass_1_1mag__state.html#a05412f5a1f7b78ee7e78d53d225c8b91">Compass::mag_state::mag_history_index</a></div><div class="ttdeci">uint8_t mag_history_index</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00370">AP_Compass.h:370</a></div></div>
<div class="ttc" id="classCompass_html_a6e03b3c0b3eb8e71581562f5054afad3"><div class="ttname"><a href="classCompass.html#a6e03b3c0b3eb8e71581562f5054afad3">Compass::_thr_or_curr</a></div><div class="ttdeci">float _thr_or_curr</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00353">AP_Compass.h:353</a></div></div>
<div class="ttc" id="classCompass_html_a5230a4f55710e532da8f9edd0f2fb77b"><div class="ttname"><a href="classCompass.html#a5230a4f55710e532da8f9edd0f2fb77b">Compass::get_healthy_mask</a></div><div class="ttdeci">uint8_t get_healthy_mask() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00734">AP_Compass.cpp:734</a></div></div>
<div class="ttc" id="SITL__cmdline_8cpp_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="SITL__cmdline_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="SITL__cmdline_8cpp_source.html#l00081">SITL_cmdline.cpp:81</a></div></div>
<div class="ttc" id="classMatrix3_html"><div class="ttname"><a href="classMatrix3.html">Matrix3&lt; float &gt;</a></div></div>
<div class="ttc" id="classCompass_html_a791e39cdbf2f1aad7ac1c65240160abf"><div class="ttname"><a href="classCompass.html#a791e39cdbf2f1aad7ac1c65240160abf">Compass::cancel_calibration_all</a></div><div class="ttdeci">void cancel_calibration_all()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00126">AP_Compass_Calibration.cpp:126</a></div></div>
<div class="ttc" id="classCompass_html_aa3372aa51bd41b1d3ee3a9234a4396a0"><div class="ttname"><a href="classCompass.html#aa3372aa51bd41b1d3ee3a9234a4396a0">Compass::accumulate</a></div><div class="ttdeci">void accumulate()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00712">AP_Compass.cpp:712</a></div></div>
<div class="ttc" id="classCompass_html_ac47b570ae40bfba56a659c5ac766a464"><div class="ttname"><a href="classCompass.html#ac47b570ae40bfba56a659c5ac766a464">Compass::use_for_yaw</a></div><div class="ttdeci">bool use_for_yaw(void) const </div><div class="ttdoc">return true if the compass should be used for yaw calculations </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00828">AP_Compass.cpp:828</a></div></div>
<div class="ttc" id="classCompass_html_a2593e947a6c8a4937dccd2d367158b74"><div class="ttname"><a href="classCompass.html#a2593e947a6c8a4937dccd2d367158b74">Compass::read</a></div><div class="ttdeci">bool read()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00721">AP_Compass.cpp:721</a></div></div>
<div class="ttc" id="AP__Compass_8h_html_abcc8f45d824956d37bc5dad4710611b4"><div class="ttname"><a href="AP__Compass_8h.html#abcc8f45d824956d37bc5dad4710611b4">AP_COMPASS_MOT_COMP_THROTTLE</a></div><div class="ttdeci">#define AP_COMPASS_MOT_COMP_THROTTLE</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00017">AP_Compass.h:17</a></div></div>
<div class="ttc" id="classCompass_html_a424b78025887b128dd21833cb6e31d0b"><div class="ttname"><a href="classCompass.html#a424b78025887b128dd21833cb6e31d0b">Compass::_declination</a></div><div class="ttdeci">AP_Float _declination</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00337">AP_Compass.h:337</a></div></div>
<div class="ttc" id="classCompass_html_a18ec405430e055e4a01912a8ca73cbc3"><div class="ttname"><a href="classCompass.html#a18ec405430e055e4a01912a8ca73cbc3">Compass::set_offsets</a></div><div class="ttdeci">void set_offsets(uint8_t i, const Vector3f &amp;offsets)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00746">AP_Compass.cpp:746</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a50dc445d1c9b8ed874a7a7d7054737d2"><div class="ttname"><a href="structCompass_1_1mag__state.html#a50dc445d1c9b8ed874a7a7d7054737d2">Compass::mag_state::diagonals</a></div><div class="ttdeci">AP_Vector3f diagonals</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00360">AP_Compass.h:360</a></div></div>
<div class="ttc" id="classCompass_html_a307ba851d14fd2ac3b655227812f6b4d"><div class="ttname"><a href="classCompass.html#a307ba851d14fd2ac3b655227812f6b4d">Compass::set_motor_compensation</a></div><div class="ttdeci">void set_motor_compensation(uint8_t i, const Vector3f &amp;motor_comp_factor)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00798">AP_Compass.cpp:798</a></div></div>
<div class="ttc" id="classCompass_html_a7bc9b45433e47cbd2632578388882135"><div class="ttname"><a href="classCompass.html#a7bc9b45433e47cbd2632578388882135">Compass::get_count</a></div><div class="ttdeci">uint8_t get_count(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00106">AP_Compass.h:106</a></div></div>
<div class="ttc" id="classCompass_html_a655af5eda065627c96838de985e24b57"><div class="ttname"><a href="classCompass.html#a655af5eda065627c96838de985e24b57">Compass::set_current</a></div><div class="ttdeci">void set_current(float amps)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00232">AP_Compass.h:232</a></div></div>
<div class="ttc" id="classCompass_html_a9b827b915597e590ea05fab467e676b0"><div class="ttname"><a href="classCompass.html#a9b827b915597e590ea05fab467e676b0">Compass::set_board_orientation</a></div><div class="ttdeci">void set_board_orientation(enum Rotation orientation)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00183">AP_Compass.h:183</a></div></div>
<div class="ttc" id="classCompass_html_a839923d1ee8f5b97644ff9d1fc034fed"><div class="ttname"><a href="classCompass.html#a839923d1ee8f5b97644ff9d1fc034fed">Compass::set_throttle</a></div><div class="ttdeci">void set_throttle(float thr_pct)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00224">AP_Compass.h:224</a></div></div>
<div class="ttc" id="classCompass_html_a0bc30e897c2c0c412120e1b1337bd1cb"><div class="ttname"><a href="classCompass.html#a0bc30e897c2c0c412120e1b1337bd1cb">Compass::_setup_earth_field</a></div><div class="ttdeci">void _setup_earth_field()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00980">AP_Compass.cpp:980</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a4ac6e96bb0e028b4bad4faba7ecdb8c1"><div class="ttname"><a href="structCompass_1_1mag__state.html#a4ac6e96bb0e028b4bad4faba7ecdb8c1">Compass::mag_state::offdiagonals</a></div><div class="ttdeci">AP_Vector3f offdiagonals</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00361">AP_Compass.h:361</a></div></div>
<div class="ttc" id="GCS__MAVLink_8h_html"><div class="ttname"><a href="GCS__MAVLink_8h.html">GCS_MAVLink.h</a></div><div class="ttdoc">One size fits all header for MAVLink integration. </div></div>
<div class="ttc" id="classCompass_html_af18c9c4651e6d74aa1315e4b67779ae7"><div class="ttname"><a href="classCompass.html#af18c9c4651e6d74aa1315e4b67779ae7">Compass::_calibrator</a></div><div class="ttdeci">CompassCalibrator _calibrator[COMPASS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00392">AP_Compass.h:392</a></div></div>
<div class="ttc" id="AP__Param_8h_html"><div class="ttname"><a href="AP__Param_8h.html">AP_Param.h</a></div><div class="ttdoc">A system for managing and storing variables that are of general interest to the system. </div></div>
<div class="ttc" id="classCompass_html_a659da6997da12f2a27ffd5eb45fedf8a"><div class="ttname"><a href="classCompass.html#a659da6997da12f2a27ffd5eb45fedf8a">Compass::_accept_calibration</a></div><div class="ttdeci">bool _accept_calibration(uint8_t i)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00132">AP_Compass_Calibration.cpp:132</a></div></div>
<div class="ttc" id="classCompass_html_a5051de1d15ee203600422235ab93c88c"><div class="ttname"><a href="classCompass.html#a5051de1d15ee203600422235ab93c88c">Compass::get_declination</a></div><div class="ttdeci">float get_declination() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00852">AP_Compass.cpp:852</a></div></div>
<div class="ttc" id="classCompass_html_a17d18b7b6d4fd415595d63d4741d4e83"><div class="ttname"><a href="classCompass.html#a17d18b7b6d4fd415595d63d4741d4e83">Compass::send_mag_cal_report</a></div><div class="ttdeci">void send_mag_cal_report(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00207">AP_Compass_Calibration.cpp:207</a></div></div>
<div class="ttc" id="classCompass_html_ae581710aa79ddf7abce3b3893bb08ea5"><div class="ttname"><a href="classCompass.html#ae581710aa79ddf7abce3b3893bb08ea5">Compass::set_and_save_diagonals</a></div><div class="ttdeci">void set_and_save_diagonals(uint8_t i, const Vector3f &amp;diagonals)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00765">AP_Compass.cpp:765</a></div></div>
<div class="ttc" id="classCompass_html_a394201f6f17f4cf13643b3e49c69a9cc"><div class="ttname"><a href="classCompass.html#a394201f6f17f4cf13643b3e49c69a9cc">Compass::_primary</a></div><div class="ttdeci">AP_Int8 _primary</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00334">AP_Compass.h:334</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a91f27329cbc70a03207bcee33e2b42fd"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a></div><div class="ttdeci">#define x(i)</div></div>
<div class="ttc" id="classCompass_html_aeb8bcac3c1fe1fc0b2c2c55259b3ea9b"><div class="ttname"><a href="classCompass.html#aeb8bcac3c1fe1fc0b2c2c55259b3ea9b">Compass::last_declination</a></div><div class="ttdeci">float last_declination</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00269">AP_Compass.h:269</a></div></div>
<div class="ttc" id="classCompass_html_a851187d6b05722fb549d2534fa57a1f7"><div class="ttname"><a href="classCompass.html#a851187d6b05722fb549d2534fa57a1f7">Compass::get_motor_compensation</a></div><div class="ttdeci">const Vector3f &amp; get_motor_compensation(uint8_t i) const </div><div class="ttdoc">get motor compensation factors as a vector </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00206">AP_Compass.h:206</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="classCompass_html"><div class="ttname"><a href="classCompass.html">Compass</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00045">AP_Compass.h:45</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html"><div class="ttname"><a href="structCompass_1_1mag__state.html">Compass::mag_state</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00355">AP_Compass.h:355</a></div></div>
<div class="ttc" id="classCompassCalibrator_html"><div class="ttname"><a href="classCompassCalibrator.html">CompassCalibrator</a></div><div class="ttdef"><b>Definition:</b> <a href="CompassCalibrator_8h_source.html#l00019">CompassCalibrator.h:19</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a3e2ff88eb37ae470b4c1b4b3c232305e"><div class="ttname"><a href="structCompass_1_1mag__state.html#a3e2ff88eb37ae470b4c1b4b3c232305e">Compass::mag_state::offset</a></div><div class="ttdeci">AP_Vector3f offset</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00359">AP_Compass.h:359</a></div></div>
<div class="ttc" id="classCompass_html_a063eabf244187b5d60bb4674f09bce8e"><div class="ttname"><a href="classCompass.html#a063eabf244187b5d60bb4674f09bce8e">Compass::_accept_calibration_mask</a></div><div class="ttdeci">bool _accept_calibration_mask(uint8_t mask)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00160">AP_Compass_Calibration.cpp:160</a></div></div>
<div class="ttc" id="classCompass_html_ab34228c0d17042ff15c933fabcdb3a1b"><div class="ttname"><a href="classCompass.html#ab34228c0d17042ff15c933fabcdb3a1b">Compass::_auto_reboot</a></div><div class="ttdeci">bool _auto_reboot()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00308">AP_Compass.h:308</a></div></div>
<div class="ttc" id="classCompass_html_a4ba6019609a7cb2b5321ed892531f78d"><div class="ttname"><a href="classCompass.html#a4ba6019609a7cb2b5321ed892531f78d">Compass::get_learn_type</a></div><div class="ttdeci">enum LearnType get_learn_type(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00281">AP_Compass.h:281</a></div></div>
<div class="ttc" id="classCompass_html_afdd4d0c78f52388a68dfc07deeec11a6"><div class="ttname"><a href="classCompass.html#afdd4d0c78f52388a68dfc07deeec11a6">Compass::_start_calibration_mask</a></div><div class="ttdeci">bool _start_calibration_mask(uint8_t mask, bool retry=false, bool autosave=false, float delay_sec=0.0f, bool autoreboot=false)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00074">AP_Compass_Calibration.cpp:74</a></div></div>
<div class="ttc" id="classCompass_html_a9eab3a10f235ee9544ceaa11bb220c2c"><div class="ttname"><a href="classCompass.html#a9eab3a10f235ee9544ceaa11bb220c2c">Compass::_null_init_done</a></div><div class="ttdeci">bool _null_init_done</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00343">AP_Compass.h:343</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00126">AP_Param.h:126</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a037376c09d0116a149c11cceac015c6a"><div class="ttname"><a href="structCompass_1_1mag__state.html#a037376c09d0116a149c11cceac015c6a">Compass::mag_state::orientation</a></div><div class="ttdeci">AP_Int8 orientation</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00358">AP_Compass.h:358</a></div></div>
<div class="ttc" id="classCompass_html_af46d67cb8eb4bc4c51bb12be6813cfdd"><div class="ttname"><a href="classCompass.html#af46d67cb8eb4bc4c51bb12be6813cfdd">Compass::_backends</a></div><div class="ttdeci">AP_Compass_Backend * _backends[COMPASS_MAX_BACKEND]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00321">AP_Compass.h:321</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a49545b0efc480dbab4a518321a708dc1"><div class="ttname"><a href="structCompass_1_1mag__state.html#a49545b0efc480dbab4a518321a708dc1">Compass::mag_state::use_for_yaw</a></div><div class="ttdeci">AP_Int8 use_for_yaw</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00368">AP_Compass.h:368</a></div></div>
<div class="ttc" id="classCompass_html_a22ce936207eeda5d3fa55237271cef3e"><div class="ttname"><a href="classCompass.html#a22ce936207eeda5d3fa55237271cef3e">Compass::get_field</a></div><div class="ttdeci">const Vector3f &amp; get_field(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00110">AP_Compass.h:110</a></div></div>
<div class="ttc" id="classCompass_html_a7eacebe38cd31859f7b5af7d90ff79ed"><div class="ttname"><a href="classCompass.html#a7eacebe38cd31859f7b5af7d90ff79ed">Compass::get_motor_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_motor_offsets(uint8_t i) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00219">AP_Compass.h:219</a></div></div>
<div class="ttc" id="classCompass_html_a0a8d322a3774f60f4c1577dad3ab016a"><div class="ttname"><a href="classCompass.html#a0a8d322a3774f60f4c1577dad3ab016a">Compass::field</a></div><div class="ttdeci">Vector3f field[COMPASS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00271">AP_Compass.h:271</a></div></div>
<div class="ttc" id="classCompass_html_aff3220e1a557a75480e4c2dbbde72973"><div class="ttname"><a href="classCompass.html#aff3220e1a557a75480e4c2dbbde72973">Compass::get_offsets_max</a></div><div class="ttdeci">uint16_t get_offsets_max(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00286">AP_Compass.h:286</a></div></div>
<div class="ttc" id="classCompass_html_af932d7ff1fc2e49177e3f2dae6e55d64"><div class="ttname"><a href="classCompass.html#af932d7ff1fc2e49177e3f2dae6e55d64">Compass::_offset_max</a></div><div class="ttdeci">AP_Int16 _offset_max</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00390">AP_Compass.h:390</a></div></div>
<div class="ttc" id="AP__Math_8h_html"><div class="ttname"><a href="AP__Math_8h.html">AP_Math.h</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_afe6deabcf507751cd66c36639bb9dde0"><div class="ttname"><a href="structCompass_1_1mag__state.html#afe6deabcf507751cd66c36639bb9dde0">Compass::mag_state::dev_id</a></div><div class="ttdeci">AP_Int32 dev_id</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00366">AP_Compass.h:366</a></div></div>
<div class="ttc" id="classCompass_html_a5ed931ce45b6449a63d57bb01fe5a0c9ad3d9fde6fa4c8639a4d835b130be0b95"><div class="ttname"><a href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9ad3d9fde6fa4c8639a4d835b130be0b95">Compass::LEARN_EKF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00277">AP_Compass.h:277</a></div></div>
<div class="ttc" id="classCompass_html_a53de8105fdd000b28afe20ced1b85d5a"><div class="ttname"><a href="classCompass.html#a53de8105fdd000b28afe20ced1b85d5a">Compass::_motor_comp_type</a></div><div class="ttdeci">AP_Int8 _motor_comp_type</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00350">AP_Compass.h:350</a></div></div>
<div class="ttc" id="classCompass_html_ab0afcd20922d7badce8e8b8cc04610b5"><div class="ttname"><a href="classCompass.html#ab0afcd20922d7badce8e8b8cc04610b5">Compass::_get_cal_mask</a></div><div class="ttdeci">uint8_t _get_cal_mask() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00255">AP_Compass_Calibration.cpp:255</a></div></div>
<div class="ttc" id="classCompass_html_a4d696bdfb4d2ab9f0646d413cb6a0ee4"><div class="ttname"><a href="classCompass.html#a4d696bdfb4d2ab9f0646d413cb6a0ee4">Compass::getHIL</a></div><div class="ttdeci">const Vector3f &amp; getHIL(uint8_t instance) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00974">AP_Compass.cpp:974</a></div></div>
<div class="ttc" id="classCompass_html_a1c48170d8c8966b22fb150b1634443ec"><div class="ttname"><a href="classCompass.html#a1c48170d8c8966b22fb150b1634443ec">Compass::_detect_backends</a></div><div class="ttdeci">void _detect_backends(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00497">AP_Compass.cpp:497</a></div></div>
<div class="ttc" id="classCompass_html_a6ef45f63ac177793bf38270cef8228cb"><div class="ttname"><a href="classCompass.html#a6ef45f63ac177793bf38270cef8228cb">Compass::get_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_offsets(uint8_t i) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00142">AP_Compass.h:142</a></div></div>
<div class="ttc" id="classCompass_html_aa539b29e5a1086364381c2b6fc37e37e"><div class="ttname"><a href="classCompass.html#aa539b29e5a1086364381c2b6fc37e37e">Compass::_calibration_threshold</a></div><div class="ttdeci">AP_Float _calibration_threshold</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00397">AP_Compass.h:397</a></div></div>
<div class="ttc" id="AP__Common_8h_html"><div class="ttname"><a href="AP__Common_8h.html">AP_Common.h</a></div><div class="ttdoc">Common definitions and utility routines for the ArduPilot libraries. </div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a68760988300f793f13dbfecfcc4c2714"><div class="ttname"><a href="structCompass_1_1mag__state.html#a68760988300f793f13dbfecfcc4c2714">Compass::mag_state::motor_offset</a></div><div class="ttdeci">Vector3f motor_offset</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00377">AP_Compass.h:377</a></div></div>
<div class="ttc" id="classCompass_html_ac3584d30eca4e60567613c1b09785505"><div class="ttname"><a href="classCompass.html#ac3584d30eca4e60567613c1b09785505">Compass::set_declination</a></div><div class="ttdeci">void set_declination(float radians, bool save_to_eeprom=true)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00842">AP_Compass.cpp:842</a></div></div>
<div class="ttc" id="AP__Compass_8h_html_a0a6a0f28d3465747ea15e7d9091994de"><div class="ttname"><a href="AP__Compass_8h.html#a0a6a0f28d3465747ea15e7d9091994de">COMPASS_MAX_INSTANCES</a></div><div class="ttdeci">#define COMPASS_MAX_INSTANCES</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00042">AP_Compass.h:42</a></div></div>
<div class="ttc" id="classCompass_html_a26a6c969c9e588fb680b04e99edbe811"><div class="ttname"><a href="classCompass.html#a26a6c969c9e588fb680b04e99edbe811">Compass::_hil_mode</a></div><div class="ttdeci">bool _hil_mode</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00395">AP_Compass.h:395</a></div></div>
<div class="ttc" id="classCompass_html_ad897fd4be9dd67a65343465614629568"><div class="ttname"><a href="classCompass.html#ad897fd4be9dd67a65343465614629568">Compass::motor_compensation_type</a></div><div class="ttdeci">void motor_compensation_type(const uint8_t comp_type)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00995">AP_Compass.cpp:995</a></div></div>
<div class="ttc" id="AP__Compass__Backend_8h_html"><div class="ttname"><a href="AP__Compass__Backend_8h.html">AP_Compass_Backend.h</a></div></div>
<div class="ttc" id="classCompass_html_ab8b1d18b185660a957d2faf417e9b1dd"><div class="ttname"><a href="classCompass.html#ab8b1d18b185660a957d2faf417e9b1dd">Compass::compass_cal_update</a></div><div class="ttdeci">void compass_cal_update()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00010">AP_Compass_Calibration.cpp:10</a></div></div>
<div class="ttc" id="classCompass_html_a5b92dfeb8382c411fc5cdfe2c35569b0"><div class="ttname"><a href="classCompass.html#a5b92dfeb8382c411fc5cdfe2c35569b0">Compass::handle_mag_cal_command</a></div><div class="ttdeci">uint8_t handle_mag_cal_command(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00270">AP_Compass_Calibration.cpp:270</a></div></div>
<div class="ttc" id="classCompass_html_a5ed931ce45b6449a63d57bb01fe5a0c9accd3c6a7c4bb094dc05ac4ebb2a5b465"><div class="ttname"><a href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9accd3c6a7c4bb094dc05ac4ebb2a5b465">Compass::LEARN_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00275">AP_Compass.h:275</a></div></div>
<div class="ttc" id="classCompass_html_a3be4f1bd3056c7c0d97226f58e9f32f0"><div class="ttname"><a href="classCompass.html#a3be4f1bd3056c7c0d97226f58e9f32f0">Compass::healthy</a></div><div class="ttdeci">bool healthy(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00135">AP_Compass.h:135</a></div></div>
<div class="ttc" id="CompassCalibrator_8h_html"><div class="ttname"><a href="CompassCalibrator_8h.html">CompassCalibrator.h</a></div></div>
<div class="ttc" id="AP__Declination_8h_html"><div class="ttname"><a href="AP__Declination_8h.html">AP_Declination.h</a></div></div>
<div class="ttc" id="classCompass_html_ad754f61119dbfa8704305021f58d2a01"><div class="ttname"><a href="classCompass.html#ad754f61119dbfa8704305021f58d2a01">Compass::_cancel_calibration</a></div><div class="ttdeci">void _cancel_calibration(uint8_t i)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00104">AP_Compass_Calibration.cpp:104</a></div></div>
<div class="ttc" id="classCompass_html_a336097cfe417d924215ae16a8d54834c"><div class="ttname"><a href="classCompass.html#a336097cfe417d924215ae16a8d54834c">Compass::get_motor_compensation_type</a></div><div class="ttdeci">uint8_t get_motor_compensation_type() const </div><div class="ttdoc">get the motor compensation value. </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00194">AP_Compass.h:194</a></div></div>
<div class="ttc" id="classCompass_html_a93d4187acb991b33c5c25f9e16b3b0ce"><div class="ttname"><a href="classCompass.html#a93d4187acb991b33c5c25f9e16b3b0ce">Compass::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00264">AP_Compass.h:264</a></div></div>
<div class="ttc" id="classCompass_html_a1267fc640f7c52d889feb34d8ee1d240"><div class="ttname"><a href="classCompass.html#a1267fc640f7c52d889feb34d8ee1d240">Compass::_cancel_calibration_mask</a></div><div class="ttdeci">void _cancel_calibration_mask(uint8_t mask)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00116">AP_Compass_Calibration.cpp:116</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a37a5242ab675b8bdf0ce4246e03c5729"><div class="ttname"><a href="structCompass_1_1mag__state.html#a37a5242ab675b8bdf0ce4246e03c5729">Compass::mag_state::last_update_ms</a></div><div class="ttdeci">uint32_t last_update_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00383">AP_Compass.h:383</a></div></div>
<div class="ttc" id="classCompass_html_afd52e3b95b4813b56a79742c0d98e6e4"><div class="ttname"><a href="classCompass.html#afd52e3b95b4813b56a79742c0d98e6e4">Compass::_compass_count</a></div><div class="ttdeci">uint8_t _compass_count</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00325">AP_Compass.h:325</a></div></div>
<div class="ttc" id="classVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="classCompass_html_aa81dfaba861a7072aac805e6cbae25d4"><div class="ttname"><a href="classCompass.html#aa81dfaba861a7072aac805e6cbae25d4">Compass::send_mag_cal_progress</a></div><div class="ttdeci">void send_mag_cal_progress(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00176">AP_Compass_Calibration.cpp:176</a></div></div>
<div class="ttc" id="classCompass_html_a59f46d32a935d4faecc4a28d262c4388"><div class="ttname"><a href="classCompass.html#a59f46d32a935d4faecc4a28d262c4388">Compass::consistent</a></div><div class="ttdeci">bool consistent() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l01006">AP_Compass.cpp:1006</a></div></div>
<div class="ttc" id="classCompass_html_a7dd2ed6c298000c620e1919b67a9e029"><div class="ttname"><a href="classCompass.html#a7dd2ed6c298000c620e1919b67a9e029">Compass::get_motor_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_motor_offsets(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00220">AP_Compass.h:220</a></div></div>
<div class="ttc" id="classCompass_html_aa1f44c7920bbd147fa2e58bfedd3c4bb"><div class="ttname"><a href="classCompass.html#aa1f44c7920bbd147fa2e58bfedd3c4bb">Compass::get_field</a></div><div class="ttdeci">const Vector3f &amp; get_field(uint8_t i) const </div><div class="ttdoc">Return the current field as a Vector3f in milligauss. </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00109">AP_Compass.h:109</a></div></div>
<div class="ttc" id="classCompass_html_a79776eee973736f7e2b218d698225dc1"><div class="ttname"><a href="classCompass.html#a79776eee973736f7e2b218d698225dc1">Compass::is_calibrating</a></div><div class="ttdeci">bool is_calibrating() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00239">AP_Compass_Calibration.cpp:239</a></div></div>
<div class="ttc" id="rotations_8h_html_a4940d1dc528122726d2c8c475657e1a9"><div class="ttname"><a href="rotations_8h.html#a4940d1dc528122726d2c8c475657e1a9">Rotation</a></div><div class="ttdeci">Rotation</div><div class="ttdef"><b>Definition:</b> <a href="rotations_8h_source.html#l00027">rotations.h:27</a></div></div>
<div class="ttc" id="classCompass_html_affadd7bda9a16ce1c28be3249bad36b1"><div class="ttname"><a href="classCompass.html#affadd7bda9a16ce1c28be3249bad36b1">Compass::Bearth</a></div><div class="ttdeci">Vector3f Bearth</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00268">AP_Compass.h:268</a></div></div>
<div class="ttc" id="classCompass_html_aeef734d2cd69c8c0c3efa182ec7f80bb"><div class="ttname"><a href="classCompass.html#aeef734d2cd69c8c0c3efa182ec7f80bb">Compass::calculate_heading</a></div><div class="ttdeci">float calculate_heading(const Matrix3f &amp;dcm_matrix) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00074">AP_Compass.h:74</a></div></div>
<div class="ttc" id="classCompass_html_af72f92b449a02ac52a761c61b43597c9"><div class="ttname"><a href="classCompass.html#af72f92b449a02ac52a761c61b43597c9">Compass::_hil</a></div><div class="ttdeci">struct Compass::@13 _hil</div></div>
<div class="ttc" id="AP__Compass_8h_html_aa22be79a45fb28cb3160eacdf5ad4432"><div class="ttname"><a href="AP__Compass_8h.html#aa22be79a45fb28cb3160eacdf5ad4432">AP_COMPASS_MOT_COMP_CURRENT</a></div><div class="ttdeci">#define AP_COMPASS_MOT_COMP_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00018">AP_Compass.h:18</a></div></div>
<div class="ttc" id="classCompass_html_abfc394b43272d5a6e97001232e201b7f"><div class="ttname"><a href="classCompass.html#abfc394b43272d5a6e97001232e201b7f">Compass::save_offsets</a></div><div class="ttdeci">void save_offsets(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00790">AP_Compass.cpp:790</a></div></div>
<div class="ttc" id="classCompass_html_ac3bf8f6ab108927b2ea704b3dcba1355"><div class="ttname"><a href="classCompass.html#ac3bf8f6ab108927b2ea704b3dcba1355">Compass::_backend_count</a></div><div class="ttdeci">uint8_t _backend_count</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00322">AP_Compass.h:322</a></div></div>
<div class="ttc" id="classCompass_html_a82c25fb3c34757ee529eeece644c88fc"><div class="ttname"><a href="classCompass.html#a82c25fb3c34757ee529eeece644c88fc">Compass::set_and_save_offsets</a></div><div class="ttdeci">void set_and_save_offsets(uint8_t i, int x, int y, int z)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00159">AP_Compass.h:159</a></div></div>
<div class="ttc" id="AP__Compass_8h_html_a5ae256887a80a65f39d06f1cb2cbfacb"><div class="ttname"><a href="AP__Compass_8h.html#a5ae256887a80a65f39d06f1cb2cbfacb">COMPASS_MAX_BACKEND</a></div><div class="ttdeci">#define COMPASS_MAX_BACKEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00043">AP_Compass.h:43</a></div></div>
<div class="ttc" id="classCompass_html_a1479c75532bc97308b1c698b67cf9bcc"><div class="ttname"><a href="classCompass.html#a1479c75532bc97308b1c698b67cf9bcc">Compass::configured</a></div><div class="ttdeci">bool configured(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00924">AP_Compass.cpp:924</a></div></div>
<div class="ttc" id="classCompass_html_a5ed931ce45b6449a63d57bb01fe5a0c9"><div class="ttname"><a href="classCompass.html#a5ed931ce45b6449a63d57bb01fe5a0c9">Compass::LearnType</a></div><div class="ttdeci">LearnType</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00274">AP_Compass.h:274</a></div></div>
<div class="ttc" id="classCompass_html_a71d8ad1cb96263dfe4c0f712f14fac97"><div class="ttname"><a href="classCompass.html#a71d8ad1cb96263dfe4c0f712f14fac97">Compass::compass_cal_requires_reboot</a></div><div class="ttdeci">bool compass_cal_requires_reboot()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00119">AP_Compass.h:119</a></div></div>
<div class="ttc" id="classCompass_html_aa953947e6a3d5acc0504e3f7c1e6b61d"><div class="ttname"><a href="classCompass.html#aa953947e6a3d5acc0504e3f7c1e6b61d">Compass::_state</a></div><div class="ttdeci">struct Compass::mag_state _state[COMPASS_MAX_INSTANCES]</div></div>
<div class="ttc" id="classCompass_html_a95d49517b12183412d9d0ed481b785bf"><div class="ttname"><a href="classCompass.html#a95d49517b12183412d9d0ed481b785bf">Compass::set_initial_location</a></div><div class="ttdeci">void set_initial_location(int32_t latitude, int32_t longitude)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00813">AP_Compass.cpp:813</a></div></div>
<div class="ttc" id="Console_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="Console_8cpp_source.html#l00053">Console.cpp:53</a></div></div>
<div class="ttc" id="classCompass_html_a1d376552464c5c5792326561d063ef7e"><div class="ttname"><a href="classCompass.html#a1d376552464c5c5792326561d063ef7e">Compass::_board_orientation</a></div><div class="ttdeci">enum Rotation _board_orientation</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00331">AP_Compass.h:331</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_a90887b7c30ed529dc3fecfb36729f9d7"><div class="ttname"><a href="structCompass_1_1mag__state.html#a90887b7c30ed529dc3fecfb36729f9d7">Compass::mag_state::motor_compensation</a></div><div class="ttdeci">AP_Vector3f motor_compensation</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00374">AP_Compass.h:374</a></div></div>
<div class="ttc" id="classCompass_html_abb757f0add93c16d079a469265e2489b"><div class="ttname"><a href="classCompass.html#abb757f0add93c16d079a469265e2489b">Compass::_mag_history_size</a></div><div class="ttdeci">static const uint8_t _mag_history_size</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00346">AP_Compass.h:346</a></div></div>
<div class="ttc" id="structCompass_1_1mag__state_html_ab28e5dcaf24ec01fef67b8b5c5a84a9e"><div class="ttname"><a href="structCompass_1_1mag__state.html#ab28e5dcaf24ec01fef67b8b5c5a84a9e">Compass::mag_state::field</a></div><div class="ttdeci">Vector3f field</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00380">AP_Compass.h:380</a></div></div>
<div class="ttc" id="classCompass_html_adeefda110ce0a02edfb3d344d632777a"><div class="ttname"><a href="classCompass.html#adeefda110ce0a02edfb3d344d632777a">Compass::save_motor_compensation</a></div><div class="ttdeci">void save_motor_compensation()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l00804">AP_Compass.cpp:804</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 14 2017 11:51:10 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
